{% extends 'base.html' %}
{% load static %}

{% block page_title %}Centro de Notificaciones{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden">
        <div class="p-4 sm:p-6 border-b dark:border-gray-700 flex justify-between items-center">
            <h2 class="text-lg font-semibold">Centro de Notificaciones</h2>
            <a href="{% url 'notificaciones:marcar_todas_leidas' %}" class="text-sm font-semibold text-red-600 hover:underline">Marcar todas como leídas</a>
        </div>
        <div class="divide-y dark:divide-gray-700">
            {% if notificaciones_list %}
                {% for notificacion in notificaciones_list %}
                <a href="{{ notificacion.enlace|default:'#' }}" class="block">
                    <div class="flex items-start gap-4 p-4 {% if notificacion.id in just_read_ids %}bg-red-50/50 dark:bg-red-900/20{% elif not notificacion.leida %}bg-blue-50/50 dark:bg-blue-900/20{% endif %} hover:bg-gray-50 dark:hover:bg-gray-700/50">
                        <div class="flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center bg-gray-100 dark:bg-gray-700">
                            <i data-lucide="bell" class="w-5 h-5 text-gray-500"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-sm text-gray-800 dark:text-gray-200">{{ notificacion.mensaje }}</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">{{ notificacion.fecha_creacion|timesince }} atrás</p>
                        </div>
                        {% if not notificacion.leida and notificacion.id not in just_read_ids %}
                        <div class="flex-shrink-0 flex items-center h-full">
                            <div class="w-2.5 h-2.5 bg-red-500 rounded-full"></div>
                        </div>
                        {% endif %}
                    </div>
                </a>
                {% endfor %}
            {% else %}
                <p class="p-8 text-center text-sm text-gray-500">No tienes notificaciones.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
